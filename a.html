<!doctype html>
<html lang="hu">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>zoffOS Server LXQt (1.0.5) ‚Äì Teljes Rendszer Dokument√°ci√≥</title>
  <meta name="description" content="zoffOS Server LXQt (1.0.5) ‚Äì filoz√≥fia, telep√≠t√©s, els≈ë ind√≠t√°s, h√°l√≥zat, biztons√°g, webszerver, t≈±zfal, napl√≥z√°s, karbantart√°s, ZFS, Debian FHS, hibakeres√©s ‚Äì r√©szletes HTML + CSS dokument√°ci√≥." />
  <style>
    :root {
      --bg:#0b0d10; --panel:#12151a; --muted:#1a1f27; --text:#e7eaf0; --sub:#b7c0cf;
      --accent:#70e1ff; --accent-2:#64f7a3; --danger:#ff6b6b; --border:#222838; --code-bg:#0e1116;
      --shadow:0 12px 36px rgba(0,0,0,.4); --radius:16px; --radius-sm:12px; --maxw:1180px;
    }
    @media (prefers-color-scheme: light){
      :root{ --bg:#f7f9fc; --panel:#ffffff; --muted:#eef2f8; --text:#0b1220; --sub:#4b5563;
             --accent:#0ea5e9; --accent-2:#10b981; --danger:#dc2626; --border:#e5e7eb; --code-bg:#0b1220;
             --shadow:0 12px 36px rgba(2,6,23,.08);
      }
    }
    /* Base */
    html{scroll-behavior:smooth}
    body{margin:0; font:16px/1.65 system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Arial, "Apple Color Emoji","Segoe UI Emoji"; color:var(--text); background:radial-gradient(1200px 800px at -10% -10%, rgba(112,225,255,.06), transparent 55%), radial-gradient(1200px 800px at 110% 10%, rgba(100,247,163,.06), transparent 55%), var(--bg)}
    a{color:var(--accent); text-decoration:none}
    a:hover{text-decoration:underline}
    .container{max-width:var(--maxw); margin:0 auto; padding:24px}
    ul,ol{padding-left:20px}
    li{margin-bottom:8px}

    /* Layout */
    .layout{display:grid; grid-template-columns:290px 1fr; gap:20px; min-height:100dvh}
    nav.sidebar{position:sticky; top:0; height:100dvh; overflow-y:auto; padding:22px; border-right:1px solid var(--border); background:linear-gradient(180deg, rgba(0,0,0,.05), transparent), var(--bg)}
    .brand{display:flex; align-items:center; gap:10px; font-weight:800; font-size:18px}
    .brand .ver{margin-left:auto; font:12px ui-monospace; color:var(--sub); background:var(--muted); padding:6px 8px; border-radius:999px}
    .toc{margin:16px 0 8px; border:1px dashed var(--border); border-radius:14px; padding:12px; background:rgba(0,0,0,.03)}
    .toc h3{margin:0 0 6px; font-size:12px; letter-spacing:.08em; text-transform:uppercase; color:var(--sub)}
    .toc a{display:block; padding:8px 10px; border-radius:10px; color:var(--text); text-decoration:none; font-size:15px}
    .toc a:hover{background:var(--muted)}

    main{padding:24px}

    /* Hero */
    .hero{background:linear-gradient(140deg, rgba(112,225,255,.1), rgba(100,247,163,.1)); border:1px solid var(--border); border-radius:20px; box-shadow:var(--shadow); padding:28px; margin:14px 0 26px}
    .hero h1{margin:0 0 8px; font-size:28px}
    .hero p{margin:0; color:var(--sub); font-size:17px; line-height:1.6}

    /* Sections */
    section{background:var(--panel); border:1px solid var(--border); border-radius:var(--radius); box-shadow:var(--shadow); padding:24px; margin:18px 0}
    section h2{margin:0 0 12px; font-size:22px; color:var(--accent); border-bottom:1px solid var(--border); padding-bottom:8px}
    section h3{margin-top:20px; font-size:19px; color:var(--accent-2)}
    section h4{margin-top:16px; font-size:17px; color:var(--sub); font-weight:600}

    /* Helpers */
    .grid{display:grid; gap:16px}
    .grid.cols-2{grid-template-columns:1fr 1fr}
    .grid.cols-3{grid-template-columns:repeat(3,1fr)}
    @media (max-width:1100px){.layout{grid-template-columns:1fr} nav.sidebar{position:relative; height:auto; overflow-y:visible}}
    @media (max-width:900px){.grid.cols-2,.grid.cols-3{grid-template-columns:1fr}}

    code,kbd,pre{font:13.5px/1.5 ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace}
    pre{background:var(--code-bg); color:#e9eef7; padding:14px 16px; border-radius:12px; overflow:auto; border:1px solid #1b2230}
    code:not(pre code){background:var(--muted); padding:2px 5px; border-radius:5px; color:var(--accent)}
    kbd{background:var(--muted); border:1px solid var(--border); padding:2px 6px; border-radius:6px; color:var(--sub)}

    .callout{border:1px solid var(--border); border-radius:14px; padding:16px 18px; background:var(--muted)}
    .callout.warning{border-color:rgba(255,107,107,.4); background:linear-gradient(180deg, rgba(255,107,107,.08), transparent); color:var(--danger)}
    .callout.success{border-color:rgba(100,247,163,.4); background:linear-gradient(180deg, rgba(100,247,163,.08), transparent); color:var(--accent-2)}

    table{width:100%; border-collapse:separate; border-spacing:0; border:1px solid var(--border); border-radius:12px; overflow:hidden; margin-top:16px}
    th,td{padding:12px 14px; border-bottom:1px solid var(--border)}
    thead th{background:var(--muted); text-align:left; font-size:14px; color:var(--sub)}
    tbody tr:last-child td{border-bottom:0}

    footer{padding:32px 0 40px; color:var(--sub); text-align:center}
    .skip{position:absolute; left:-10000px; top:auto; width:1px; height:1px; overflow:hidden}
    .skip:focus{position:static; width:auto; height:auto}
  </style>
</head>
<body>
  <a class="skip" href="#content">Ugr√°s a tartalomra</a>
  <div class="layout">
    <nav class="sidebar" aria-label="Oldal navig√°ci√≥">
      <div class="brand">zoffOS Docs <span class="ver">v1.0.5</span></div>
      <div class="toc">
        <h3>Tartalom</h3>
        <a href="#sec-1">1. Filoz√≥fia</a>
        <a href="#sec-2">2. Rendszerk√∂vetelm√©nyek & ISO</a>
        <a href="#sec-3">3. Telep√≠t√©s (Live ‚Üí Disk)</a>
        <a href="#sec-4">4. Els≈ë ind√≠t√°s & var√°zsl√≥</a>
        <a href="#sec-5">5. H√°l√≥zat & t≈±zfal</a>
        <a href="#sec-6">6. SSH hardening</a>
        <a href="#sec-7">7. Webszerver (Nginx + TLS)</a>
        <a href="#sec-8">8. Napl√≥z√°s & monitoroz√°s</a>
        <a href="#sec-9">9. Karbantart√°s & friss√≠t√©s</a>
        <a href="#sec-10">10. ZFS alapok</a>
        <a href="#sec-11">11. LXQt & megjelen√©s</a>
        <a href="#sec-12">12. Debian FHS m√©lyebben</a>
        <a href="#sec-13">13. Gyakori hib√°k & megold√°sok</a>
        <a href="#sec-14">14. Parancs pusk√°z√≥</a>
        <a href="#sec-15">15. Fogalomt√°r</a>
        <a href="#sec-16">16. Felhaszn√°l√≥k & jogosults√°gok</a>
        <a href="#sec-17">17. AppArmor & szolg√°ltat√°s-izol√°ci√≥</a>
        <a href="#sec-18">18. Ment√©si strat√©gi√°k</a>
        <a href="#sec-19">19. Automatiz√°l√°s: systemd units & timers</a>
        <a href="#sec-20">20. Kont√©nerek r√∂viden (Docker/Podman)</a>
        <a href="#sec-21">21. Konfigur√°ci√≥ menedzsment (Ansible)</a>
        <a href="#sec-22">22. Reverse proxy & load balancing</a>
        <a href="#sec-23">23. Teljes√≠tm√©nyhangol√°s</a>
        <a href="#sec-24">24. √územeltet√©si runbook</a>
        <a href="#sec-25">25. Mell√©kletek & sablonok</a>
      </div>
      <small style="color:var(--sub); padding:0 12px; font-size:12px;">HTML + CSS ‚Ä¢ statikus ‚Ä¢ reszponz√≠v</small>
    </nav>

    <main id="content">
      <div class="container">
        <header class="hero" role="banner">
          <h1>üìÑ zoffOS Server LXQt (1.0.5) ‚Äì Teljes Rendszer Dokument√°ci√≥</h1>
          <p>Stabil Debian 13 ‚ÄûTrixie‚Äù alap + pehelyk√∂nny≈± LXQt: szerverfunkci√≥k grafikus k√©nyelemmel. Az al√°bbi √∫tmutat√≥ a telep√≠t√©st≈ël a hardeningen √°t az √ºzemeltet√©sig v√©gigvezet mindenen, kezd≈ë √©s halad√≥ felhaszn√°l√≥k sz√°m√°ra egyar√°nt.</p>
        </header>

        <section id="sec-1">
          <h2>1. Filoz√≥fia: Mi√©rt l√©tezik a zoffOS?</h2>
          <p>A <strong>zoffOS</strong> c√©lja √°thidalni a tiszt√°n parancssoros (CLI), "headless" szerverek purit√°ns√°ga √©s a teljes √©rt√©k≈± asztali k√∂rnyezetek (DE) er≈ëforr√°s-ig√©nyess√©ge k√∂zti szakad√©kot. A rendszer alapja egy <strong>live-telep√≠t≈ë</strong> (k√∂zvetlen√ºl USB-r≈ël kipr√≥b√°lhat√≥ √©s telep√≠thet≈ë), amely m√°r indul√°skor tartalmazza a legfontosabb szerver-eszk√∂z√∂ket: <code>ssh</code>, <code>ufw</code>, <code>fail2ban</code>, <code>nginx</code>, <code>htop</code>, <code>tmux</code>, mindezt egy pehelyk√∂nny≈±, de funkcion√°lis <strong>LXQt</strong> asztali k√∂rnyezetbe √°gyazva.</p>
          <p>Nem c√©lja egy teljes √©rt√©k≈± desktop OS helyettes√≠t√©se, sem egy minimalista, "rock-solid" szerver-disztr√≥ lev√°lt√°sa. A zoffOS egy "homelab" √©s fejleszt≈ëi sv√°jci bicska.</p>

          <div class="grid cols-2">
            <div class="callout">
              <strong>Alapelvek</strong>
              <ul>
                <li><em>Biztons√°g alapb√≥l (Secure by Default)</em> ‚Äì Minimaliz√°lt t√°mad√°si fel√ºlet, el≈ëkonfigur√°lt UFW alap szab√°lyok, Fail2ban akt√≠v SSH v√©delemmel.</li>
                <li><em>Egyszer≈±s√©g √©s k√©nyeem</em> ‚Äì Grafikus telep√≠t≈ë √©s egy k√©nyelmes els≈ë ind√≠t√°si var√°zsl√≥, ami elv√©gzi az alapvet≈ë hardening l√©p√©seket.</li>
                <li><em>Gyorsas√°g √©s alacsony er≈ëforr√°sig√©ny</em> ‚Äì Az LXQt √©s a v√°logatott csomagok alacsony mem√≥ria- √©s CPU-l√°bnyomot garant√°lnak, messze a GNOME/KDE alatt.</li>
                <li><em>Stabil alapok</em> ‚Äì Debian 13 "Trixie" (Stable) adja a rendszer gerinc√©t, √∂tv√∂zve a megb√≠zhat√≥s√°got a friss csomagokkal.</li>
              </ul>
            </div>
            <div class="callout">
              <strong>Ide√°lis haszn√°lati esetek</strong>
              <ul>
                <li><strong>Home-lab / Otthoni szerver:</strong> Pi-hole, webszerver, f√°jlszerver futtat√°sa, ahol n√©ha j√≥l j√∂n a grafikus fel√ºlet a konfigur√°l√°shoz.</li>
                <li><strong>Fejleszt≈ëi "j√°tsz√≥t√©r":</strong> Gyorsan telep√≠thet≈ë rendszer SSH, tmux, htop √©s egy gyors LXQt termin√°l emul√°tor (QTerminal) el√©r√©ssel.</li>
                <li><strong>Kezd≈ë √ºzemeltet≈ëk:</strong> Biztons√°gos √©s ir√°ny√≠tott indul√°s a szerver-adminisztr√°ci√≥ vil√°g√°ba, grafikus seg√≠ts√©ggel.</li>
                <li><strong>Dem√≥ k√∂rnyezet:</strong> Webszolg√°ltat√°sok gyors bemutat√°sa √ºgyf√©lnek, ahol a GUI-n kereszt√ºl a logok vagy a "htop" is megmutathat√≥.</li>
              </ul>
            </div>
          </div>
        </section>

        <section id="sec-2">
          <h2>2. Rendszerk√∂vetelm√©nyek & ISO elk√©sz√≠t√©s</h2>
          <div class="grid cols-2">
            <div>
              <h3>Minimum hardver</h3>
              <ul>
                <li>CPU: x86_64, 2 mag (pl. Core 2 Duo vagy √∫jabb)</li>
                <li>RAM: 2 GB (LXQt √©s alap szolg√°ltat√°sok)</li>
                <li>T√°rhely: 16 GB szabad SSD/NVMe</li>
                <li>H√°l√≥zat: Ethernet (aj√°nlott) vagy Wi-Fi (NetworkManager t√°mogat√°ssal)</li>
              </ul>
              <h4>Aj√°nlott hardver</h4>
              <ul>
                <li>CPU: x86_64, 4 mag (pl. i3/i5/Ryzen 3)</li>
                <li>RAM: 4 GB+ (t√∂bb webszolg√°ltat√°s/kont√©ner futtat√°s√°hoz)</li>
                <li>T√°rhely: 32 GB+ SSD/NVMe</li>
              </ul>
            </div>
            <div>
              <h3>ISO ‚Üí USB (Linux)</h3>
              <p>Haszn√°ld a <code>dd</code> parancsot vagy egy grafikus eszk√∂zt. A <code>dd</code> a legmegb√≠zhat√≥bb.</p>
              <pre><code># 1. Ellen≈ërizd a lemez azonos√≠t√≥j√°t (pl. /dev/sdb, NEM /dev/sdb1)
sudo lsblk

# 2. √çrd ki az ISO-t (FIGYELEM: MINDEN ADAT T√ñRL≈êDIK /dev/sdX-r≈ël!)
sudo dd if=zoffos-1.0.5.iso of=/dev/sdX bs=4M status=progress oflag=sync
</code></pre>
              <h4>Windows</h4>
              <ul>
                <li>Haszn√°lj <strong>Rufus</strong> vagy <strong>Ventoy</strong> eszk√∂zt.</li>
                <li>Rufus eset√©n v√°laszd a "DD Image" √≠r√°si m√≥dot, ha felaj√°nlja.</li>
                <li>Part√≠ci√≥s s√©ma: GPT, C√©lrendszer: UEFI (aj√°nlott).</li>
              </ul>
            </div>
          </div>
          <h3>ISO integrit√°s√°nak ellen≈ërz√©se (Fontos!)</h3>
          <p>Miel≈ëtt ki√≠rn√°d, ellen≈ërizd a let√∂lt√∂tt f√°jl √©ps√©g√©t a weboldalon tal√°lhat√≥ SHA256 hash seg√≠ts√©g√©vel.</p>
          <pre><code># Linuxon
sha256sum zoffos-1.0.5.iso

# Hasonl√≠tsd √∂ssze a kapott hash-t a weboldalon l√©v≈ëvel.</code></pre>
          <div class="callout"><strong>Tipp:</strong> A legt√∂bb modern g√©p UEFI m√≥dban m≈±k√∂dik. Ha a telep√≠t≈ë nem indul, ellen≈ërizd a BIOS/UEFI be√°ll√≠t√°sokat, √©s kapcsold ki a <strong>Secure Boot</strong> opci√≥t, mivel a zoffOS (mint sok Debian-alap√∫ live rendszer) nem rendelkezik Microsoft √°ltal al√°√≠rt boottal.</div>
        </section>

        <section id="sec-3">
          <h2>3. Telep√≠t√©s: Live m√≥db√≥l lemezre</h2>
          <p>A zoffOS a Calamares telep√≠t≈ët haszn√°lja, ami egyszer≈± √©s gyors folyamatot biztos√≠t.</p>
          <ol>
            <li>Bootolj az elk√©sz√≠tett USB eszk√∂zr≈ël. A GRUB men√ºben v√°laszd az alap√©rtelmezett <em>"Try zoffOS Live"</em> opci√≥t.</li>
            <li>Bet√∂lt≈ëdik az LXQt asztal. Itt tesztelheted a hardver kompatibilit√°st (h√°l√≥zat, kijelz≈ë).</li>
            <li>Kattints az asztalon tal√°lhat√≥ <strong>"zoffOS telep√≠t√©se"</strong> ikonra.</li>
            <li>V√°laszd ki a nyelvet, id≈ëz√≥n√°t √©s billenty≈±zetkioszt√°st.</li>
            <li><strong>Lemez part√≠cion√°l√°s:</strong>
              <ul>
                <li><strong>Automatikus:</strong> "Lemez t√∂rl√©se √©s teljes felhaszn√°l√°sa". Ez a legegyszer≈±bb, l√©trehoz egy EFI part√≠ci√≥t √©s egy <code>/</code> (gy√∂k√©r) part√≠ci√≥t.</li>
                <li><strong>K√©zi (Halad√≥):</strong> Javasolt, ha k√ºl√∂n <code>/home</code> part√≠ci√≥t szeretn√©l, vagy ZFS/LVM-et haszn√°ln√°l. L√°sd al√°bb.</li>
              </ul>
            </li>
            <li><strong>Felhaszn√°l√≥ l√©trehoz√°sa:</strong> Add meg a neved, a g√©p nev√©t (hostname, pl. <code>zoff-server</code>), √©s egy <strong>er≈ës jelsz√≥t</strong> az <code>admin</code> felhaszn√°l√≥hoz. Ez a felhaszn√°l√≥ tagja lesz a <code>sudo</code> csoportnak.</li>
            <li>A telep√≠t√©s p√°r percet vesz ig√©nybe. A v√©g√©n ind√≠tsd √∫jra a g√©pet, √©s t√°vol√≠tsd el az USB eszk√∂zt.</li>
          </ol>
          
          <h3>Halad√≥ part√≠cion√°l√°si javaslat (K√©zi m√≥d)</h3>
          <p>Ez a s√©ma biztos√≠tja, hogy a rendszer √∫jratelep√≠t√©sekor a <code>/home</code> adatok megmaradjanak.</p>
          <pre><code>/boot/efi    512M      FAT32     (EFI System Partition, 'esp' √©s 'boot' flag)
/            30G-50G   ext4      (A rendszer gy√∂kere)
/home        Marad√©k   ext4      (Felhaszn√°l√≥i adatok)
swap         4G-8G     linux-swap (Opcion√°lis, de aj√°nlott)</code></pre>
          <div class="callout"><strong>Mi√©rt √©rdemes k√ºl√∂n part√≠ci√≥?</strong>
            <ul>
              <li><strong><code>/home</code> k√ºl√∂n:</strong> Ha a rendszert (<code>/</code>) √∫jra kell telep√≠teni, a <code>/home</code> part√≠ci√≥t form√°z√°s n√©lk√ºl csatolva minden adatod √©s be√°ll√≠t√°sod megmarad.</li>
              <li><strong><code>/var</code> k√ºl√∂n (Szerver):</strong> Nagy forgalm√∫ szervereken √©rdemes lehet a <code>/var</code> (ahol a logok √©s a web adatok vannak) mapp√°t is k√ºl√∂n part√≠ci√≥ra tenni, hogy egy elszabadult log ne t√∂ltse tele a gy√∂k√©r part√≠ci√≥t.</li>
            </ul>
          </div>
        </section>

        <section id="sec-4">
          <h2>4. Els≈ë ind√≠t√°s & var√°zsl√≥ (<code>zoffOS-firstboot</code>)</h2>
          <p>Az els≈ë bejelentkez√©s ut√°n (az <code>admin</code> felhaszn√°l√≥val) automatikusan elindul a <code>zoffOS-firstboot</code> termin√°l-alap√∫ var√°zsl√≥. Ez egy egyszer≈± shell script, ami seg√≠t az alapvet≈ë biztons√°gi be√°ll√≠t√°sokban.</p>
          <h4>A var√°zsl√≥ l√©p√©sei:</h4>
          <ul>
            <li><strong>Admin jelsz√≥ meger≈ës√≠t√©se:</strong> Biztons√°gi ellen≈ërz√©s (a telep√≠t√©s sor√°n m√°r megadtad).</li>
            <li><strong>Hostname v√©gleges√≠t√©se:</strong> Lehet≈ës√©g a g√©p nev√©nek (pl. <code>zoff-server</code>) megv√°ltoztat√°s√°ra (<code>hostnamectl set-hostname &lt;nev&gt;</code>).</li>
            <li><strong>Rendszerfriss√≠t√©s:</strong> Lefuttat egy teljes <code>apt update && apt full-upgrade</code> parancsot.</li>
            <li><strong>SSH kulcs gener√°l√°sa:</strong> L√©trehoz egy szerver-oldali SSH kulcsp√°rt (<code>ed25519</code>) a <code>~/.ssh/</code> mapp√°ban, ha m√©g nem l√©tezik.</li>
            <li><strong>SSH Hardening (Opcion√°lis):</strong>
              <ul>
                <li>R√°k√©rdez, hogy letiltsa-e a jelszavas SSH bejelentkez√©st.</li>
                <li><strong>Er≈ësen aj√°nlott</strong> igent mondani, DE csak azut√°n, hogy a saj√°t publikus kulcsodat m√°r elhelyezted a szerveren!</li>
              </ul>
            </li>
            <li><strong>Fail2ban enged√©lyez√©se:</strong> V√©glegesen enged√©lyezi √©s elind√≠tja a <code>fail2ban</code> szolg√°ltat√°st (<code>systemctl enable --now fail2ban</code>).</li>
          </ul>
          <div class="callout warning" role="alert">
            <strong>Figyelem:</strong> A jelszavas SSH tilt√°sa kritikus biztons√°gi l√©p√©s. Miel≈ëtt igent mondasz a var√°zsl√≥ban, nyiss egy √∫j termin√°lt, √©s m√°sold √°t a <strong>saj√°t kliens g√©ped</strong> publikus kulcs√°t (pl. <code>id_ed25519.pub</code>) a szerver <code>/home/admin/.ssh/authorized_keys</code> f√°jlj√°ba. Ha ezt kihagyod, √©s tiltod a jelsz√≥t, kiz√°rod magad a rendszerb≈ël SSH-n kereszt√ºl.
          </div>
          <h3>A var√°zsl√≥ ut√°ni teend≈ëk</h3>
          <p>A var√°zsl√≥ lefut√°sa ut√°n √©rdemes manu√°lisan ellen≈ërizni p√°r dolgot:</p>
          <ol>
            <li><strong>SSH teszt:</strong> Pr√≥b√°lj meg egy m√°sik g√©pr≈ël SSH-val bejelentkezni a kulcsoddal.</li>
            <li><strong>UFW √°llapot:</strong> Ellen≈ërizd a t≈±zfal √°llapot√°t: <code>sudo ufw status verbose</code>.</li>
            <li><strong>Szolg√°ltat√°sok:</strong> Ellen≈ërizd a fut√≥ f≈ë szolg√°ltat√°sokat: <code>systemctl status ssh nginx fail2ban</code>.</li>
          </ol>
        </section>

        <section id="sec-5">
          <h2>5. H√°l√≥zat & t≈±zfal</h2>
          <h3>UFW (Uncomplicated Firewall) alapbe√°ll√≠t√°s</h3>
          <p>A zoffOS az UFW-t haszn√°lja az <code>iptables</code> kezel√©s√©re. Az alap√©rtelmezett politika (policy) az, hogy mindent tiltunk befel√©, √©s mindent enged√ºnk kifel√©. Az els≈ë ind√≠t√°si var√°zsl√≥ m√°r be√°ll√≠tja az alapvet≈ë szab√°lyokat.</p>
          <pre><code># Alap√©rtelmezett szab√°lyok be√°ll√≠t√°sa (minden bej√∂v≈ë tiltva, kimen≈ë engedve)
sudo ufw default deny incoming
sudo ufw default allow outgoing

# Alapvet≈ë szolg√°ltat√°sok enged√©lyez√©se
sudo ufw allow 22/tcp   # SSH (vagy a te egyedi portod)
sudo ufw allow 80/tcp   # HTTP
sudo ufw allow 443/tcp  # HTTPS

# T≈±zfal enged√©lyez√©se (automatikusan indul a rendszerrel)
sudo ufw enable

# √Ållapot r√©szletes lek√©rdez√©se
sudo ufw status verbose</code></pre>

          <h3>Halad√≥ UFW szab√°lyok</h3>
          <pre><code># Egyedi port (pl. Plex)
sudo ufw allow 32400/tcp

# Port tartom√°ny
sudo ufw allow 60000:61000/udp

# Szab√°ly t√∂rl√©se
sudo ufw delete allow 8080/tcp

# Bejelentkez√©s napl√≥z√°sa (t√∫l sok logot gener√°lhat!)
sudo ufw logging on

# Rate limiting (brute-force ellen SSH-ra)
# 6 pr√≥b√°lkoz√°s / 30 mp
sudo ufw limit 22/tcp</code></pre>

          <h3>NetworkManager (NM)</h3>
          <p>Az LXQt a NetworkManager-t haszn√°lja a h√°l√≥zatkezel√©shez. A t√°lc√°n tal√°lhat√≥ appleten kereszt√ºl k√∂nnyen kezelhet≈ë.</p>
          <h4>CLI (nmcli)</h4>
          <p>A parancssoros <code>nmcli</code> rendk√≠v√ºl er≈ës eszk√∂z.</p>
          <pre><code># Eszk√∂z√∂k √°llapota (l√°tja-e a k√°rty√°t?)
nmcli device status

# El√©rhet≈ë kapcsolat profilok
nmcli connection show

# El√©rhet≈ë Wi-Fi h√°l√≥zatok
nmcli device wifi list</code></pre>
          <h4>TUI (nmtui)</h4>
          <p>Ha a grafikus fel√ºlet nem el√©rhet≈ë, de egy "men√ºs" megold√°s kell, haszn√°ld az <code>nmtui</code> parancsot. Ez egy teljes k√©perny≈ës, termin√°l-alap√∫ kezel≈ëfel√ºlet a NetworkManagerhez.</p>
          <pre><code>nmtui</code></pre>
        </section>

        <section id="sec-6">
          <h2>6. SSH hardening l√©p√©sr≈ël l√©p√©sre</h2>
          <p>A biztons√°gos SSH kapcsolat alapja a kulcs-alap√∫ azonos√≠t√°s √©s a jelszavas bejelentkez√©s teljes tilt√°sa.</p>
          <ol>
            <li><strong>Kulcsp√°r gener√°l√°s (a SAJ√ÅT KLIENS g√©peden!)</strong>
              <p>Ha m√©g nincs kulcsod, gener√°lj egyet. Az <code>ed25519</code> jelenleg a leger≈ësebb √©s leggyorsabb.</p>
              <pre><code># Ez a te laptopodon/PC-den fusson
ssh-keygen -t ed25519 -C "admin@zoffos-server"</code></pre>
            </li>
            <li><strong>Publikus kulcs m√°sol√°sa a zoffOS szerverre</strong>
              <p>Ez a parancs √°tm√°solja a <code>.pub</code> f√°jlod tartalm√°t a szerver <code>authorized_keys</code> f√°jlj√°ba.</p>
              <pre><code># M√©g mindig a kliens g√©pen (SzerverIP = a zoffOS c√≠me)
ssh-copy-id admin@SzerverIP</code></pre>
            </li>
            <li><strong>Bel√©p√©s kulccsal √©s a jelsz√≥ tilt√°sa (a Szerveren)</strong>
              <p>L√©pj be SSH-n. Most m√°r kulccsal fog bel√©ptetni. Ezut√°n szerkeszd az SSH konfigur√°ci√≥s f√°jlt.</p>
              <pre><code># L√©pj be a szerverre
ssh admin@SzerverIP

# Szerkeszd a configot (nano, vim, vagy az LXQt-n a Featherpad)
sudo nano /etc/ssh/sshd_config</code></pre>
            </li>
            <li><strong>Fontos be√°ll√≠t√°sok az <code>sshd_config</code> f√°jlban</strong>
              <p>Keresd meg √©s m√≥dos√≠tsd az al√°bbi sorokat (szedd ki a <code>#</code> jelet el≈ël√ºk, ha sz√ºks√©ges):</p>
              <pre><code># Port 22  (V√°ltoztasd meg egy nem-sztenderd portra, pl. 2244, a robotok ellen)
PermitRootLogin no
PubkeyAuthentication yes
PasswordAuthentication no
ChallengeResponseAuthentication no
UsePAM no # Vitathat√≥, de n√∂veli a biztons√°got, ha csak kulcsot haszn√°lsz

# Opcion√°lis, de er≈ës: modern algoritmusok el≈ënyben r√©szes√≠t√©se
KexAlgorithms sntrup761x25519-sha512@openssh.com,curve25519-sha256
MACs hmac-sha2-512,hmac-sha2-256</code></pre>
            </li>
            <li><strong>SSH szolg√°ltat√°s √∫jraind√≠t√°sa</strong>
              <pre><code># Config tesztel√©se
sudo sshd -t

# Ha "OK", akkor √∫jraind√≠t√°s
sudo systemctl restart ssh</code></pre>
            </li>
            <li><strong>Fail2ban ellen≈ërz√©s</strong>
              <p>A zoffOS alapb√≥l tartalmaz egy <code>[sshd]</code> jail-t. Ellen≈ërizd, hogy fut-e.</p>
              <pre><code>sudo fail2ban-client status
sudo fail2ban-client status sshd</code></pre>
            </li>
          </ol>
          <div class="callout success"><strong>Tipp:</strong> Ha megv√°ltoztattad az SSH portot (pl. 2244-re), ne felejtsd el friss√≠teni az UFW szab√°lyt!
          <pre><code>sudo ufw allow 2244/tcp
sudo ufw delete allow 22/tcp</code></pre>
          √âs innent≈ël √≠gy tudsz bel√©pni: <code>ssh -p 2244 admin@SzerverIP</code></div>
        </section>

        <section id="sec-7">
          <h2>7. Webszerver (Nginx + TLS)</h2>
          <p>Az Nginx gyors, k√∂nny≈± √©s rendk√≠v√ºl j√≥l sk√°l√°zhat√≥ webszerver √©s reverse proxy. A zoffOS alapb√≥l telep√≠ti.</p>
          <h3>Nginx ind√≠t√°s √©s √°llapot</h3>
          <pre><code># Enged√©lyez√©s (bootkor induljon) √©s azonnali ind√≠t√°s
sudo systemctl enable --now nginx

# √Ållapot ellen≈ërz√©se
sudo systemctl status nginx
# Ellen≈ërizd, hogy az UFW engedi-e a 80 √©s 443 portokat!
sudo ufw status</code></pre>
          
          <h3>Alap k√∂zz√©t√©tel (Default site)</h3>
          <p>Az alap√©rtelmezett Nginx konfigur√°ci√≥ a <code>/var/www/html</code> mapp√°b√≥l szolg√°l ki.</p>
          <pre><code># Hozzunk l√©tre egy teszt oldalt
sudo mkdir -p /var/www/html
sudo chown -R www-data:www-data /var/www/html
sudo chmod -R 755 /var/www/html
echo "<h1>Hell√≥, zoffOS Nginx!</h1>" | sudo tee /var/www/html/index.html</code></pre>

          <h3>Virtual host (Saj√°t domain, pl. <code>example.hu</code>)</h3>
          <p>A "best practice" az, hogy minden oldalnak saj√°t konfigur√°ci√≥s f√°jlt hozunk l√©tre a <code>sites-available</code> mapp√°ban, majd szimbolikusan linkelj√ºk a <code>sites-enabled</code> mapp√°ba.</p>
          <pre><code># 1. Konfig f√°jl l√©trehoz√°sa
sudo nano /etc/nginx/sites-available/example.hu

# 2. M√°sold be ezt a tartalmat (example.hu helyett a saj√°t domainnel)
server {
  listen 80;
  listen [::]:80;
  
  server_name example.hu www.example.hu;
  
  root /var/www/example.hu;
  index index.html index.htm;
  
  location / {
    try_files $uri $uri/ =404;
  }
  
  access_log /var/log/nginx/example.hu_access.log;
  error_log  /var/log/nginx/example.hu_error.log warn;
}

# 3. Hozd l√©tre a web gy√∂keret az √∫j oldalnak
sudo mkdir -p /var/www/example.hu
sudo chown -R www-data:www-data /var/www/example.hu
echo "<h1>Ez az example.hu oldal!</h1>" | sudo tee /var/www/example.hu/index.html

# 4. Enged√©lyezd az oldalt (szimlink l√©trehoz√°sa)
sudo ln -s /etc/nginx/sites-available/example.hu /etc/nginx/sites-enabled/

# 5. (Opcion√°lis) T√∂r√∂ld az alap√©rtelmezett oldalt, hogy ne √ºtk√∂zz√∂n
sudo rm /etc/nginx/sites-enabled/default

# 6. Teszteld a configot √©s t√∂ltsd √∫jra az Nginx-et
sudo nginx -t
# Ha 'syntax is ok', akkor:
sudo systemctl reload nginx</code></pre>
          
          <h3>HTTPS ‚Äì Let's Encrypt (Certbot)</h3>
          <p>A Certbot a legegyszer≈±bb m√≥dja az ingyenes Let's Encrypt SSL tan√∫s√≠tv√°nyok beszerz√©s√©nek √©s automatikus meg√∫j√≠t√°s√°nak.</p>
          <pre><code># 1. Certbot √©s Nginx plugin telep√≠t√©se
sudo apt update && sudo apt install -y certbot python3-certbot-nginx

# 2. Tan√∫s√≠tv√°ny ig√©nyl√©se (DNS-nek m√°r a szerver IP-j√©re kell mutatnia!)
# A certbot automatikusan m√≥dos√≠tja az Nginx konfigodat a HTTPS-hez.
sudo certbot --nginx -d example.hu -d www.example.hu

# 3. Automatikus meg√∫j√≠t√°s tesztel√©se
sudo certbot renew --dry-run
# A certbot systemd timer (certbot.timer) automatikusan gondoskodik a meg√∫j√≠t√°sr√≥l.</code></pre>
          
          <h4>Biztons√°gos TLS be√°ll√≠t√°sok (HSTS, DHE, stb.)</h4>
          <p>Miut√°n a Certbot be√°ll√≠totta a HTTPS-t, √©rdemes tov√°bb finom√≠tani a biztons√°got. Szerkeszd a <code>/etc/nginx/sites-available/example.hu</code> f√°jlt, √©s add hozz√°/m√≥dos√≠tsd ezeket az <code>ssl_</code> kezdet≈± sorokat a <code>server</code> blokkon bel√ºl:</p>
          <pre><code># ... a 'listen 443 ssl;' sorok ut√°n
ssl_protocols TLSv1.2 TLSv1.3;
ssl_prefer_server_ciphers on;
ssl_ciphers 'EECDH+AESGCM:EDH+AESGCM:AES256+EECDH:AES256+EDH';
ssl_ecdh_curve secp384r1;
ssl_session_cache shared:SSL:10m;
ssl_session_tickets off;

# Er≈ës Diffie-Hellman kulcs (gener√°lni kell!)
# sudo openssl dhparam -out /etc/nginx/dhparam.pem 4096
ssl_dhparam /etc/nginx/dhparam.pem;

# HTTP Strict Transport Security (HSTS) - 2 √©v
add_header Strict-Transport-Security "max-age=63072000; includeSubDomains; preload" always;

# Tov√°bbi biztons√°gi fejl√©cek
add_header X-Frame-Options "SAMEORIGIN" always;
add_header X-Content-Type-Options "nosniff" always;
add_header X-XSS-Protection "1; mode=block" always;
add_header Referrer-Policy "strict-origin-when-cross-origin" always;</code></pre>
        </section>

        <section id="sec-8">
          <h2>8. Napl√≥z√°s & monitoroz√°s</h2>
          <p>A rendszerprobl√©m√°k felder√≠t√©s√©nek kulcsa a napl√≥f√°jlok (logok) √©s a rendszer er≈ëforr√°sainak folyamatos figyel√©se.</p>
          <div class="grid cols-2">
            <div>
              <h3><code>journalctl</code> (systemd napl√≥)</h3>
              <p>A <code>systemd</code> k√∂zponti napl√≥z√≥ja, a <code>journald</code>, gy≈±jt mindent.</p>
              <pre><code># Teljes napl√≥, az alj√°r√≥l kezdve (kil√©p√©s: q)
journalctl -e

# Csak az utols√≥ boot √≥ta
journalctl -b

# Csak egy adott szolg√°ltat√°s (pl. Nginx) napl√≥i
journalctl -u nginx

# Csak a mai nap
journalctl --since "today"

# Folyamatos k√∂vet√©s (mint 'tail -f')
journalctl -f

# Csak a hiba (error) szint≈± √ºzenetek
journalctl -p err -b</code></pre>
            </div>
            <div>
              <h3>Hagyom√°nyos logok (<code>/var/log</code>)</h3>
              <p>B√°r a <code>journald</code> k√∂zponti, sok szolg√°ltat√°s m√©g √≠r a <code>/var/log</code> mapp√°ba.</p>
              <pre><code># Nginx logok (ha a vhostban √≠gy √°ll√≠tottad be)
tail -f /var/log/nginx/example.hu_error.log

# Sikertelen bejelentkez√©sek (Fail2ban is ezt n√©zi)
tail -f /var/log/auth.log

# Csomagkezel≈ë logjai
cat /var/log/apt/history.log

# Logok rot√°l√°sa
sudo logrotate -f /etc/logrotate.conf</code></pre>
            </div>
          </div>
          <h3>Val√≥s idej≈± er≈ëforr√°s-figyel√©s</h3>
          <pre><code># A klasszikus, interakt√≠v processzfigyel≈ë
htop

# Mem√≥ria √©s swap haszn√°lat (human-readable)
free -h

# Lemezhaszn√°lat (human-readable, 1 m√©lys√©g)
df -h
du -h --max-depth=1 /var/

# I/O m≈±veletek figyel√©se (sz≈±k keresztmetszet keres√©s)
# Telep√≠teni kell: sudo apt install iotop
sudo iotop

# H√°l√≥zati forgalom figyel√©se
# Telep√≠teni kell: sudo apt install iftop
sudo iftop

# Akt√≠v h√°l√≥zati kapcsolatok list√°z√°sa
ss -tulpn</code></pre>
        </section>

        <section id="sec-9">
          <h2>9. Karbantart√°s & friss√≠t√©s</h2>
          <p>Egy szerver karbantart√°sa rendszeres friss√≠t√©st √©s takar√≠t√°st ig√©nyel.</p>
          <h3>APT csomagkezel√©s</h3>
          <pre><code># 1. Csomaglist√°k friss√≠t√©se
sudo apt update

# El√©rhet≈ë friss√≠t√©sek list√°z√°sa
sudo apt list --upgradable

# 2. Teljes rendszerfriss√≠t√©s (kernel √©s f√ºgg≈ës√©gek is)
sudo apt full-upgrade -y

# 3. Feleslegess√© v√°lt csomagok (pl. r√©gi kernelek) elt√°vol√≠t√°sa
sudo apt autoremove --purge -y

# Egyedi csomag telep√≠t√©se
sudo apt install mc

# Csomag elt√°vol√≠t√°sa (konfig f√°jlokkal egy√ºtt)
sudo apt purge mc</code></pre>

          <h3>Automatikus friss√≠t√©sek (Unattended-Upgrades)</h3>
          <p>Er≈ësen aj√°nlott be√°ll√≠tani, hogy a biztons√°gi friss√≠t√©sek automatikusan telep√ºljenek.</p>
          <pre><code># 1. Csomag telep√≠t√©se
sudo apt install unattended-upgrades apt-listchanges

# 2. Konfigur√°ci√≥ finomhangol√°sa (pl. auto-reboot)
sudo nano /etc/apt/apt.conf.d/50unattended-upgrades
# √Åltal√°ban az alap Debian be√°ll√≠t√°sok j√≥k (csak security).

# 3. Enged√©lyez√©s
sudo dpkg-reconfigure -plow unattended-upgrades</code></pre>

          <h3>Szolg√°ltat√°sok menedzsel√©se (<code>systemctl</code>)</h3>
          <pre><code># Szolg√°ltat√°s √°llapot√°nak lek√©rdez√©se
systemctl status nginx

# Szolg√°ltat√°s √∫jraind√≠t√°sa (pl. config m√≥dos√≠t√°s ut√°n)
systemctl restart ssh

# Szolg√°ltat√°s enged√©lyez√©se (rendszerindul√°skor induljon)
systemctl enable fail2ban

# Szolg√°ltat√°s letilt√°sa
systemctl disable cron</code></pre>

          <h3>Biztons√°gi ment√©s (<code>rsync</code> p√©ld√°k)</h3>
          <p>Az <code>rsync</code> egy hat√©kony eszk√∂z a f√°jlok szinkroniz√°l√°s√°ra, ak√°r helyi, ak√°r t√°voli helyre.</p>
          <pre><code># /home ment√©se egy csatolt USB meghajt√≥ra (/mnt/backup)
# -a: arch√≠v m√≥d (jogosults√°gok, id≈ëb√©lyegek megmaradnak)
# -v: verbose (r√©szletes)
# -h: human-readable
# --delete: t√∂rli a c√©lhelyr≈ël azokat a f√°jlokat, amik a forr√°sban m√°r nincsenek meg
rsync -avh --delete /home/admin/ /mnt/backup/admin/

# Web gy√∂k√©r ment√©se t√°voli szerverre SSH-n kereszt√ºl
rsync -avh -e "ssh -p 2244" --delete /var/www/ backupuser@remote-server:/opt/backup/www/

# Vissza√°ll√≠t√°s ment√©sb≈ël (csak a forr√°st √©s a c√©lt kell megcser√©lni)
rsync -avh /mnt/backup/admin/ /home/admin/</code></pre>
        </section>

        <section id="sec-10">
          <h2>10. ZFS alapok</h2>
          <p>A zoffOS alapb√≥l nem ZFS-re telep√ºl (az ext4 a f≈ë f√°jlrendszer), de a <code>zfsutils-linux</code> csomag el≈ëre telep√≠tve van, √≠gy k√∂nnyed√©n l√©trehozhatsz ZFS pool-okat adatlemezek sz√°m√°ra. A ZFS egy modern, Copy-on-Write (CoW) f√°jlrendszer, ami p√°ratlan adat-integrit√°st, snapshot √©s kl√≥noz√°si k√©pess√©geket biztos√≠t.</p>

          <h3>Mi√©rt haszn√°lj ZFS-t?</h3>
          <ul>
            <li><strong>Adatintegrit√°s:</strong> Minden adatblokk checksum-mal van ell√°tva. A ZFS automatikusan √©szleli √©s jav√≠tja a "csendes" adats√©r√ºl√©seket (bit rot), ha redund√°ns pool-t (pl. mirror) haszn√°lsz.</li>
            <li><strong>Snapshotok:</strong> Azonnali, szinte nulla k√∂lts√©g≈± pillanatfelv√©telek, amikre k√∂nnyen vissza lehet t√©rni.</li>
            <li><strong>Copy-on-Write (CoW):</strong> A m√≥dos√≠t√°sok √∫j helyre √≠r√≥dnak, az eredeti adat √©rintetlen marad, am√≠g az √≠r√°s be nem fejez≈ëdik. Ez v√©di az adatot pl. √°ramsz√ºnet eset√©n.</li>
            <li><strong>T√∂m√∂r√≠t√©s:</strong> Be√©p√≠tett, transzparens t√∂m√∂r√≠t√©s (pl. <code>lz4</code>), ami gyorsabb, mint az adatok olvas√°sa t√∂m√∂r√≠t√©s n√©lk√ºl, mert kevesebb I/O kell.</li>
          </ul>

          <h3>Gyors kezd√©s: Pool l√©trehoz√°s</h3>
          <pre><code># 1. Modul bet√∂lt√©se (√°ltal√°ban automatikus)
sudo modprobe zfs

# 2. Lemezek azonos√≠t√°sa (haszn√°ld a /dev/disk/by-id/ mapp√°t!)
ls -l /dev/disk/by-id/

# 3. Pool l√©trehoz√°s (p√©lda: 2 lemezes t√ºkr√∂z√©s - RAID1)
sudo zpool create -f tank mirror /dev/disk/by-id/ATA-DISK-A /dev/disk/by-id/ATA-DISK-B

# 4. Pool l√©trehoz√°s (p√©lda: egy lemez, csak tesztel√©sre!)
sudo zpool create -f tank /dev/sdb

# 5. √Ållapot ellen≈ërz√©se
sudo zpool status</code></pre>

          <h3>Dataset-ek √©s tulajdons√°gok</h3>
          <p>A "Pool" (<code>tank</code>) egy t√°rol√≥. Ezen bel√ºl "Dataset"-eket hozunk l√©tre, amik √∫gy viselkednek, mint a mapp√°k, de saj√°t tulajdons√°gaik lehetnek (pl. t√∂m√∂r√≠t√©s, mountpoint).</p>
          <pre><code># Dataset l√©trehoz√°sa a web adatoknak
sudo zfs create tank/www

# √Åll√≠tsunk be LZ4 t√∂m√∂r√≠t√©st (nagyon gyors)
sudo zfs set compression=lz4 tank/www

# √Åll√≠tsuk be a csatol√°si pontot (mountpoint)
sudo zfs set mountpoint=/var/www tank/www
# (El≈ëtte az /var/www mapp√°t √°t kell mozgatni/t√∂r√∂lni)

# Jelenlegi datasetek √©s haszn√°lat
sudo zfs list</code></pre>

          <h3>Snapshotok: A ZFS szuperk√©pess√©ge</h3>
          <pre><code># Pillanatfelv√©tel k√©sz√≠t√©se (pl. egy friss√≠t√©s el≈ëtt)
sudo zfs snapshot tank/www@frissites-elott

# ... elrontott√°l valamit ...

# Vissza√°ll√≠t√°s a snapshotra (MINDEN @frissites-elott UT√ÅNI V√ÅLTOZ√ÅS ELVESZIK!)
sudo zfs rollback tank/www@frissites-elott

# Snapshotok list√°z√°sa
sudo zfs list -t snapshot

# Snapshot t√∂rl√©se
sudo zfs destroy tank/www@frissites-elott</code></pre>
          
          <h3>Teljes√≠tm√©ny √©s √°llapot</h3>
          <pre><code># Pool I/O statisztika (folyamatos)
sudo zpool iostat -v 5

# Mem√≥ria cache (ARC) statisztik√°k
arc_summary
</code></pre>
        </section>

        <section id="sec-11">
          <h2>11. LXQt & megjelen√©s</h2>
          <p>Az LXQt a Qt5-re √©p√ºl≈ë, rendk√≠v√ºl k√∂nny≈± asztali k√∂rnyezet. A zoffOS egy el≈ëre konfigur√°lt, s√∂t√©t t√©m√°t haszn√°l a k√©nyelmes haszn√°lat √©rdek√©ben.</p>
          <ul>
            <li><strong>T√©ma:</strong> Arc-Dark (<code>/usr/share/themes/Arc-Dark</code>)</li>
            <li><strong>Ikonok:</strong> Papirus-Dark (<code>/usr/share/icons/Papirus-Dark</code>)</li>
            <li><strong>Ablakkezel≈ë:</strong> Openbox</li>
            <li><strong>Bejelentkez≈ë k√©perny≈ë:</strong> LightDM (GTK greeter)</li>
            <li><strong>Termin√°l:</strong> QTerminal (<code>qterminal</code>)</li>
            <li><strong>F√°jlkezel≈ë:</strong> PCManFM-Qt</li>
            <li><strong>Alap√©rtelmezett h√°tt√©rk√©p:</strong> <code>/usr/share/backgrounds/zoffos-wallpaper.png</code></li>
          </ul>
          <p>A be√°ll√≠t√°sok nagy r√©sze a <strong>F≈ëmen√º ‚Üí Be√°ll√≠t√°sok ‚Üí LXQt be√°ll√≠t√≥k√∂zpont</strong> men√ºpont alatt √©rhet≈ë el grafikusan. Itt √°ll√≠that√≥ a "Megjelen√©s" (t√©ma, ikonok) √©s az "Asztali be√°ll√≠t√°sok" (h√°tt√©rk√©p).</p>

          <h3>LightDM finomhangol√°s</h3>
          <p>A bejelentkez≈ë k√©perny≈ë (Greeter) a LightDM-et haszn√°lja. A konfigur√°ci√≥ja itt tal√°lhat√≥:</p>
          <pre><code># F≈ë konfigur√°ci√≥s f√°jl
sudo nano /etc/lightdm/lightdm.conf

# A zoffOS √°ltal haszn√°lt GTK greeter be√°ll√≠t√°sai
sudo nano /etc/lightdm/lightdm-gtk-greeter.conf</code></pre>
          <p>Itt √°ll√≠that√≥ be p√©ld√°ul az alap√©rtelmezett t√©ma, ikon, vagy ak√°r az automatikus bejelentkez√©s (nem aj√°nlott szerveren).</p>

          <h3>A /etc/skel mappa szerepe</h3>
          <p>A <code>/etc/skel</code> (skeleton = csontv√°z) mappa tartalmazza azokat a konfigur√°ci√≥s f√°jlokat √©s mapp√°kat (pl. <code>.config</code>, <code>.local</code>), amiket egy <strong>√∫j felhaszn√°l√≥</strong> l√©trehoz√°sakor (<code>adduser new_user</code>) a rendszer automatikusan √°tm√°sol az √∫j felhaszn√°l√≥ <code>/home/new_user/</code> mapp√°j√°ba.</p>
          <p>A zoffOS <code>/etc/skel</code> mapp√°ja tartalmazza az LXQt s√∂t√©t t√©ma be√°ll√≠t√°sait, az alap√©rtelmezett <code>.bashrc</code>-t √©s termin√°l profilokat, biztos√≠tva, hogy minden √∫j felhaszn√°l√≥ ugyanazt a k√©nyelmes k√∂rnyezetet kapja, mint az <code>admin</code>.</p>
        </section>

        <section id="sec-12">
          <h2>12. Debian FHS ‚Äì m√©lyebb √°ttekint√©s</h2>
          <p>A Filesystem Hierarchy Standard (FHS) hat√°rozza meg, hogy a Linux rendszereken melyik mappa mire szolg√°l. Ennek ismerete elengedhetetlen a hibakeres√©shez √©s adminisztr√°ci√≥hoz.</p>
          <div class="grid cols-3">
            <div>
              <h3><code>/</code> (Gy√∂k√©r)</h3>
              <p>A teljes f√°jlrendszer kiindul√°si pontja.</p>
              <h4><code>/boot</code></h4><p>Kernel (<code>vmlinuz</code>), initramfs √©s a GRUB bootloader f√°jljai.</p>
              <h4><code>/lib</code>, <code>/lib64</code>, <code>/lib/x86_64-linux-gnu</code></h4><p>Alapvet≈ë rendszerk√∂nyvt√°rak (library), amik n√©lk√ºl a rendszer nem indulna el.</p>
              <h4><code>/dev</code></h4><p>Eszk√∂zf√°jlok (device). Itt jelennek meg a hardverek, pl. <code>/dev/sda</code> (lemez), <code>/dev/ttyUSB0</code> (soros port).</p>
            </div>
            <div>
              <h3><code>/etc</code> (Konfigur√°ci√≥k)</h3>
              <p>A rendszer √©s a programok √∂sszes glob√°lis konfigur√°ci√≥s f√°jlja. <strong>Ezt a mapp√°t kell a leggyakrabban menteni.</strong></p>
              <ul>
                <li><code>/etc/ssh/sshd_config</code> (SSH)</li>
                <li><code>/etc/nginx/</code> (Nginx)</li>
                <li><code>/etc/ufw/</code> (T≈±zfal)</li>
                <li><code>/etc/fstab</code> (Lemezek csatol√°sa)</li>
                <li><code>/etc/passwd</code> (Felhaszn√°l√≥k)</li>
                <li><code>/etc/hostname</code> (G√©pn√©v)</li>
              </ul>
            </div>
            <div>
              <h3><code>/usr</code> (User Programs)</h3>
              <p>A telep√≠tett programok, dokument√°ci√≥k √©s k√∂nyvt√°raik nagy r√©sze. √Åltal√°ban csak olvashat√≥ (kiv√©ve friss√≠t√©skor).</p>
              <ul>
                <li><code>/usr/bin</code> (Futtathat√≥ programok)</li>
                <li><code>/usr/sbin</code> (Rendszeradminisztr√°ci√≥s programok)</li>
                <li><code>/usr/lib</code> (Programok k√∂nyvt√°rai)</li>
                <li><code>/usr/share/doc</code> (Dokument√°ci√≥)</li>
              </ul>
            </div>
          </div>
          <hr style="border-color:var(--border); margin:16px 0;">
          <div class="grid cols-2">
            <div>
              <h3><code>/var</code> (V√°ltoz√≥ adatok)</h3>
              <p>Ide ker√ºl minden, ami gyakran v√°ltozik: logok, web adatok, adatb√°zisok, cache.</p>
              <ul>
                <li><strong><code>/var/log</code></strong> ‚Äì A legfontosabb napl√≥k (<code>auth.log</code>, <code>syslog</code>, <code>nginx/</code>, <code>fail2ban.log</code>).</li>
                <li><strong><code>/var/www/html</code></strong> ‚Äì Alap√©rtelmezett Nginx web gy√∂k√©r.</li>
                <li><strong><code>/var/lib</code></strong> ‚Äì √Ållapotadatok (pl. <code>/var/lib/apt</code>, <code>/var/lib/mysql</code>).</li>
                <li><strong><code>/var/cache</code></strong> ‚Äì Gyors√≠t√≥t√°rak (pl. <code>/var/cache/apt</code>).</li>
              </ul>
            </div>
            <div>
              <h3><code>/home</code>, <code>/root</code>, <code>/tmp</code></h3>
              <h4><code>/home</code></h4>
              <p>A norm√°l felhaszn√°l√≥k (pl. <code>admin</code>) szem√©lyes mapp√°i. Itt vannak a felhaszn√°l√≥i be√°ll√≠t√°sok (<code>.config</code>) √©s az adatok.</p>
              <h4><code>/root</code></h4>
              <p>A <code>root</code> (super user) felhaszn√°l√≥ home mapp√°ja. Ide nem szabad norm√°l adatot menteni.</p>
              <h4><code>/tmp</code></h4>
              <p>√Åtmeneti f√°jlok. A rendszer √∫jraind√≠t√°sakor √°ltal√°ban t√∂rl≈ëdik a tartalma.</p>
            </div>
          </div>
        </section>

        <section id="sec-13">
          <h2>13. Gyakori hib√°k & megold√°sok</h2>
          <table>
            <thead><tr><th>Probl√©ma</th><th>Val√≥sz√≠n≈± Ok</th><th>Megold√°s / Hol keresd?</th></tr></thead>
            <tbody>
              <tr>
                <td><strong>SSH: "Connection refused"</strong></td>
                <td>SSH szolg√°ltat√°s nem fut, VAGY UFW t≈±zfal tiltja.</td>
                <td><code>systemctl status ssh</code><br><code>sudo ufw status | grep 22</code> (vagy az egyedi portod)</td>
              </tr>
              <tr>
                <td><strong>SSH: "Permission denied (publickey)"</strong></td>
                <td>Jelsz√≥ tiltva, √©s a kliens kulcsa nincs a szerveren, VAGY a <code>~/.ssh</code> mappa jogosults√°gai rosszak.</td>
                <td>Helyi konzolon: <code>ssh-copy-id</code> √∫jra, VAGY<br><code>chmod 700 ~/.ssh && chmod 600 ~/.ssh/authorized_keys</code></td>
              </tr>
              <tr>
                <td><strong>Nginx nem indul (failed)</strong></td>
                <td>Szintaktikai hiba a configban, VAGY a 80/443 port m√°r foglalt.</td>
                <td><code>sudo nginx -t</code> (megmondja a hib√°s sort)<br><code>sudo ss -tulpn | grep -E ':80|:443'</code></td>
              </tr>
              <tr>
                <td><strong>Weboldal 502 Bad Gateway</strong></td>
                <td>Nginx fut (reverse proxy), de a h√°tt√©ralkalmaz√°s (pl. PHP-FPM, Node.js) nem, vagy nem v√°laszol.</td>
                <td><code>systemctl status php8.2-fpm</code> (vagy a te backendod)<br><code>journalctl -u my-app</code></td>
              </tr>
              <tr>
                <td><strong>Nincs h√°l√≥zat (Live/Telep√≠tett)</strong></td>
                <td>NetworkManager nem l√°tja a k√°rty√°t, vagy nincs driver (pl. non-free Wi-Fi).</td>
                <td><code>ip a</code> (l√°tod az eszk√∂zt? pl. enp3s0)<br><code>nmcli device status</code><br><code>sudo dmesg | grep -i firmware</code> (firmware hiba keres√©se)</td>
              </tr>
              <tr>
                <td><strong>A rendszer "read-only" (csak olvashat√≥)</strong></td>
                <td>Komoly f√°jlrendszer hiba, a kernel "read-only" m√≥dban csatolta fel a lemezt, hogy megv√©dje az adatokat.</td>
                <td>Azonnali reboot. Ha nem javul, Live USB-r≈ël boot √©s <code>fsck /dev/sdXN</code> futtat√°sa a rendszerpart√≠ci√≥n.</td>
              </tr>
            </tbody>
          </table>
          
          <h3>V√©gs≈ë megold√°s: Helyre√°ll√≠t√°s (chroot)</h3>
          <p>Ha a rendszer nem bootol (pl. elrontott <code>fstab</code> vagy GRUB friss√≠t√©s), bootolj a zoffOS Live USB-r≈ël, majd "chroot"-olj be a telep√≠tett rendszerbe:</p>
          <pre><code># Tegy√ºk fel, a rendszer az /dev/sda2-n van, EFI a /dev/sda1-en
sudo mount /dev/sda2 /mnt
sudo mount /dev/sda1 /mnt/boot/efi

# K√∂ss√ºk be a sz√ºks√©ges virtu√°lis f√°jlrendszereket
sudo mount --rbind /dev /mnt/dev
sudo mount --rbind /proc /mnt/proc
sudo mount --rbind /sys /mnt/sys

# L√©pj√ºnk be a telep√≠tett rendszerbe, mintha az futna
sudo chroot /mnt

# ... Most m√°r a telep√≠tett rendszeren vagy.
# Jav√≠tsd a hib√°t (pl. nano /etc/fstab, update-grub)
# Majd l√©pj ki:
exit

# √âs unmount (fontos!)
sudo umount -R /mnt
reboot</code></pre>
        </section>

        <section id="sec-14">
          <h2>14. Parancs pusk√°z√≥</h2>
          <div class="grid cols-3">
            <div>
              <h3>systemctl (Szolg√°ltat√°sok)</h3>
              <pre><code>systemctl status nginx
systemctl restart ssh
systemctl enable --now fail2ban
systemctl disable cron
systemctl list-unit-files
systemctl list-units --type=service</code></pre>
            </div>
            <div>
              <h3>apt (Csomagkezel√©s)</h3>
              <pre><code>apt update
apt full-upgrade -y
apt install htop mc
apt purge nano
apt autoremove --purge
apt search nginx
apt show nginx</code></pre>
            </div>
            <div>
              <h3>ufw (T≈±zfal)</h3>
              <pre><code>ufw status verbose
ufw enable
ufw default deny incoming
ufw allow 443/tcp
ufw allow 1000:2000/udp
ufw delete allow 80/tcp
ufw limit 22/tcp</code></pre>
            </div>
          </div>
          <div class="grid cols-3" style="margin-top:16px;">
            <div>
              <h3>F√°jlkezel√©s</h3>
              <pre><code>ls -laHF
pwd
cp -r /src /dest
mv /old /new
rm -rf /dir
mkdir -p /a/b/c
tar -czvf a.tar.gz /dir
tar -xzvf a.tar.gz</code></pre>
            </div>
            <div>
              <h3>Keres√©s</h3>
              <pre><code># F√°jl keres√©s n√©v szerint
find / -name "config.xml"

# Keres√©s tartalomban
grep -r "jelsz√≥" /etc/

# Csomag keres√©se, ami√© a f√°jl
dpkg -S /bin/ls</code></pre>
            </div>
            <div>
              <h3>H√°l√≥zat</h3>
              <pre><code>ip a
ss -tulpn
nmcli device status
nmcli connection show
ping google.com
traceroute 8.8.8.8
host google.com</code></pre>
            </div>
          </div>
        </section>

        <section id="sec-15">
          <h2>15. Fogalomt√°r</h2>
          <ul>
            <li><strong>FHS</strong> ‚Äì Filesystem Hierarchy Standard, a Linux mappastrukt√∫ra szabv√°nya.</li>
            <li><strong>UFW</strong> ‚Äì Uncomplicated Firewall, egyszer≈±s√≠tett fel√ºlet az <code>iptables</code> (Linux kernel t≈±zfal) kezel√©s√©re.</li>
            <li><strong>Fail2ban</strong> ‚Äì Napl√≥f√°jlokat (pl. <code>auth.log</code>) figyel≈ë szolg√°ltat√°s, ami napl√≥k alapj√°n (pl. X sikertelen SSH pr√≥ba) IP c√≠meket tilt le a t≈±zfalon.</li>
            <li><strong>AppArmor / SELinux</strong> ‚Äì Mandatory Access Control (MAC) rendszerek. Az AppArmor (amit a Debian haszn√°l) profilokkal korl√°tozza, hogy egy program (pl. Nginx) milyen rendszerer≈ëforr√°sokhoz f√©rhet hozz√°.</li>
            <li><strong>Snapshot</strong> ‚Äì Egy f√°jlrendszer (pl. ZFS, BTRFS) vagy virtu√°lis g√©p egy adott id≈ëpillanatban r√∂gz√≠tett √°llapota, amire vissza lehet t√©rni.</li>
            <li><strong>systemd</strong> ‚Äì A modern Linux disztrib√∫ci√≥k (Debian 8+ √≥ta) alapvet≈ë init rendszere √©s szolg√°ltat√°skezel≈ëje. Ez ind√≠tja a rendszert √©s fel√ºgyeli a szolg√°ltat√°sokat (<code>systemctl</code>).</li>
            <li><strong>journald</strong> ‚Äì A systemd k√∂zponti napl√≥z√≥ d√©monja (<code>journalctl</code>).</li>
            <li><strong>LVM</strong> ‚Äì Logical Volume Manager. Absztrakci√≥s r√©teg a fizikai lemezek √©s a part√≠ci√≥k k√∂z√∂tt, lehet≈ëv√© teszi a part√≠ci√≥k √°tm√©retez√©s√©t, snapshotok k√©sz√≠t√©s√©t (nem CoW).</li>
            <li><strong>CoW (Copy-on-Write)</strong> ‚Äì F√°jlrendszer technika (pl. ZFS), ahol az adatok fel√ºl√≠r√°sa helyett a m√≥dos√≠t√°s √∫j helyre √≠r√≥dik, n√∂velve az adatbiztons√°got.</li>
            <li><strong>Hardening</strong> ‚Äì "Edz√©s", "kem√©ny√≠t√©s". Az a folyamat, amikor egy rendszert (pl. SSH, OS) biztons√°gosabb√° tesz√ºnk a felesleges szolg√°ltat√°sok letilt√°s√°val √©s a konfigur√°ci√≥k szigor√≠t√°s√°val.</li>
          </ul>
        </section>

        <!-- 16. Felhaszn√°l√≥k & jogosults√°gok -->
        <section id="sec-16">
          <h2>16. Felhaszn√°l√≥k & jogosults√°gok</h2>
          <h3>Felhaszn√°l√≥ l√©trehoz√°sa</h3>
          <pre><code>sudo adduser zoffina
sudo usermod -aG sudo zoffina   # sudo jog</code></pre>
          <h3>SSH kulcs √©s sudo korl√°toz√°s</h3>
          <pre><code># kulcs mappa √©s jogosults√°gok
sudo -u zoffina mkdir -p /home/zoffina/.ssh
sudo -u zoffina chmod 700 /home/zoffina/.ssh
sudoedit /etc/sudoers.d/90-zoffina
# Tartalom p√©lda (jelsz√≥ kelljen!):
# zoffina  ALL=(ALL:ALL)  ALL</code></pre>
          <h3>F√°jl jogosults√°g gyorsp√©lda</h3>
          <pre><code># tulajdon / jogosults√°g
sudo chown -R www-data:www-data /var/www/example.hu
sudo chmod -R u=rwX,g=rX,o= /var/www/example.hu</code></pre>
        </section>

        <!-- 17. AppArmor & szolg√°ltat√°s-izol√°ci√≥ -->
        <section id="sec-17">
          <h2>17. AppArmor & szolg√°ltat√°s-izol√°ci√≥</h2>
          <p>A Debian alap√©rtelmezetten AppArmor-t haszn√°l folyamat-szint≈± hozz√°f√©r√©s-szab√°lyoz√°sra.</p>
          <h3>√Ållapot √©s profilok</h3>
          <pre><code>sudo aa-status
sudo aa-enforce /etc/apparmor.d/usr.sbin.nginx
sudo aa-complain /etc/apparmor.d/usr.sbin.sshd</code></pre>
          <h3>Egyedi Nginx korl√°toz√°s (r√©szlet)</h3>
          <pre><code># /etc/apparmor.d/local/usr.sbin.nginx
# enged√©lyezett olvas√°s a webrootra
/var/www/** r,
# csak logok √≠r√°sa
/var/log/nginx/** rw,</code></pre>
        </section>

        <!-- 18. Ment√©si strat√©gi√°k -->
        <section id="sec-18">
          <h2>18. Ment√©si strat√©gi√°k</h2>
          <p>Javasolt: 3-2-1 szab√°ly (3 m√°solat, 2 k√ºl√∂n m√©dium, 1 offsite).</p>
          <h3>Rsync inkrement√°lis snapshot-st√≠lusban</h3>
          <pre><code>BACKUP=/mnt/backup
TODAY=$(date +%F)
rsync -aAX --delete --link-dest=$BACKUP/current /var/www/ $BACKUP/$TODAY/
rm -f $BACKUP/current && ln -s $BACKUP/$TODAY $BACKUP/current</code></pre>
          <h3>ZFS snapshot √©s k√ºld√©s</h3>
          <pre><code>sudo zfs snapshot tank/www@$(date +%F-%H%M)
sudo zfs send -i tank/www@prev tank/www@now | ssh backup zfs receive backup/www</code></pre>
        </section>

        <!-- 19. Automatiz√°l√°s: systemd units & timers -->
        <section id="sec-19">
          <h2>19. Automatiz√°l√°s: systemd units & timers</h2>
          <h3>Szolg√°ltat√°s egys√©g p√©lda</h3>
          <pre><code># /etc/systemd/system/zoffos-health.service
[Unit]
Description=ZoffOS health check
After=network-online.target

[Service]
Type=oneshot
ExecStart=/usr/local/bin/zoffos-health.sh

[Install]
WantedBy=multi-user.target</code></pre>
          <h3>Id≈ëz√≠t≈ë egys√©g</h3>
          <pre><code># /etc/systemd/system/zoffos-health.timer
[Unit]
Description=Run zoffos health every 5 minutes

[Timer]
OnBootSec=2min
OnUnitActiveSec=5min
Persistent=true

[Install]
WantedBy=timers.target

# Aktiv√°l√°s
sudo systemctl daemon-reload
sudo systemctl enable --now zoffos-health.timer</code></pre>
        </section>

        <!-- 20. Kont√©nerek r√∂viden -->
        <section id="sec-20">
          <h2>20. Kont√©nerek r√∂viden (Docker/Podman)</h2>
          <h3>Telep√≠t√©s (Docker)</h3>
          <pre><code>sudo apt install -y docker.io docker-compose-plugin
sudo usermod -aG docker admin
newgrp docker</code></pre>
          <h3>Egyszer≈± reverse proxy stack</h3>
          <pre><code># docker compose file (r√©szlet)
services:
  caddy:
    image: caddy:latest
    ports: ["80:80","443:443"]
    volumes:
      - ./Caddyfile:/etc/caddy/Caddyfile:ro
  app:
    image: nginx:alpine
    volumes:
      - ./site:/usr/share/nginx/html:ro</code></pre>
        </section>

        <!-- 21. Konfigur√°ci√≥ menedzsment (Ansible) -->
        <section id="sec-21">
          <h2>21. Konfigur√°ci√≥ menedzsment (Ansible)</h2>
          <h3>Gyors kezd√©s</h3>
          <pre><code>sudo apt install -y ansible
# inventory p√©lda
cat > hosts.ini <<EOF
[zoffos]
server1 ansible_host=192.0.2.10 ansible_user=admin
EOF
# ping teszt
ansible -i hosts.ini zoffos -m ping</code></pre>
          <h3>UFW szab√°ly be√°ll√≠t√°s task</h3>
          <pre><code>- name: UFW szab√°lyok
  hosts: zoffos
  become: yes
  tasks:
    - ufw:
        rule: allow
        port: "443"
        proto: tcp</code></pre>
        </section>

        <!-- 22. Reverse proxy & load balancing -->
        <section id="sec-22">
          <h2>22. Reverse proxy & load balancing</h2>
          <h3>Nginx upstream p√©lda</h3>
          <pre><code>upstream app_pool {
  server 127.0.0.1:3001;
  server 127.0.0.1:3002;
}
server {
  listen 80;
  server_name example.hu;
  location / {
    proxy_pass http://app_pool;
    proxy_set_header Host $host;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Proto $scheme;
  }
}</code></pre>
          <h3>Egyszer≈± rate limiting</h3>
          <pre><code>limit_req_zone $binary_remote_addr zone=api:10m rate=5r/s;
server { location /api/ { limit_req zone=api burst=10; } }</code></pre>
        </section>

        <!-- 23. Teljes√≠tm√©nyhangol√°s -->
        <section id="sec-23">
          <h2>23. Teljes√≠tm√©nyhangol√°s</h2>
          <h3>Nginx alap hangol√°s</h3>
          <pre><code>worker_processes auto;
worker_rlimit_nofile 65535;
events { worker_connections 8192; }
http {
  sendfile on; tcp_nopush on; tcp_nodelay on;
  keepalive_timeout 20;
  types_hash_max_size 4096;
}</code></pre>
          <h3>Kernel param√©terek (kieg√©sz√≠t√©s)</h3>
          <pre><code># /etc/sysctl.d/99-zoffos-perf.conf
net.core.somaxconn = 4096
net.ipv4.tcp_fin_timeout = 15
fs.file-max = 2097152
vm.swappiness = 10
# aktiv√°l√°s
sudo sysctl --system</code></pre>
        </section>

        <!-- 24. √územeltet√©si runbook -->
        <section id="sec-24">
          <h2>24. √územeltet√©si runbook</h2>
          <h3>Heti rutin</h3>
          <ul>
            <li>Friss√≠t√©sek: <code>apt update &amp;&amp; apt full-upgrade</code></li>
            <li>Log ellen≈ërz√©s: <code>journalctl -p warning --since "-7d"</code></li>
            <li>Ment√©s ellen≈ërz√©s: vissza√°ll√≠t√°s <em>pr√≥ba</em> egy f√°jllal</li>
          </ul>
          <h3>Incidens sablon</h3>
          <pre><code>[Id≈ëb√©lyeg] ‚Äì Mi t√∂rt√©nt?
Hat√≥k√∂r ‚Äì mely szolg√°ltat√°sok √©rintettek?
Ideiglenes mitig√°ci√≥ ‚Äì mit tett√ºnk?
Gy√∂k√©rok ‚Äì (postmortem ut√°n t√∂ltsd ki)
Akci√≥pontok ‚Äì hat√°rid≈ëkkel</code></pre>
        </section>

        <!-- 25. Mell√©kletek & sablonok -->
        <section id="sec-25">
          <h2>25. Mell√©kletek & sablonok</h2>
          <h3>Nginx biztons√°gos alap konfig (r√©szlet)</h3>
          <pre><code>server_tokens off;
add_header X-Content-Type-Options nosniff always;
add_header X-Frame-Options DENY always;
add_header Referrer-Policy no-referrer-when-downgrade;
add_header Content-Security-Policy "default-src 'self'" always;</code></pre>
          <h3>Fail2ban jail.local p√©lda</h3>
          <pre><code>[DEFAULT]
bantime = 1h
findtime = 10m
maxretry = 6
[sshd]
enabled = true
port = ssh</code></pre>
          <h3>UFW preset script (p√©lda)</h3>
          <pre><code>#!/usr/bin/env bash
set -euo pipefail
ufw --force reset
ufw default deny incoming
ufw default allow outgoing
for p in 22 80 443; do ufw allow $p/tcp; done
ufw --force enable
ufw status verbose</code></pre>
        </section>

        <footer>
          K√©sz√ºlt: zoffOS dokument√°ci√≥ ‚Ä¢ Verzi√≥ 1.0.5 ‚Ä¢ Statikus HTML + CSS.
        </footer>
      </div>
    </main>
  </div>
</body>
</html>
